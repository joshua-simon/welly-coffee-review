(this["webpackJsonpcra-plus-express"]=this["webpackJsonpcra-plus-express"]||[]).push([[0],{58:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c.n(s),i=c(28),r=c.n(i),j=c(13),l=c(16),o=c(9),b=c(8),u=c.n(b),h=function(){var e,t=Object(s.useState)({userName:"",stars:0,title:"",photo:"",blurb:"",cafeName:""}),c=Object(o.a)(t,2),a=c[0],i=a.userName,r=a.stars,b=a.title,h=a.photo,d=a.blurb,O=a.cafeName,x=c[1],f=Object(s.useState)(""),m=Object(o.a)(f,2),v=m[0],p=m[1],g=Object(s.useState)(!0),N=Object(o.a)(g,2),w=N[0],y=N[1],C=function(e){e.preventDefault();var t=e.target,c=t.name,n=t.value;x((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(j.a)({},c,n))}))},R=function(){y(!1)},S="Review successfully submitted"===(e=v)?Object(n.jsxs)("div",{children:["Review submitted!",Object(n.jsx)("button",{onClick:R,children:"x"})]}):""===e?null:"Error: review not submitted. Please try again later";return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("form",{onSubmit:function(e){console.log("submit function reached"),e.preventDefault();var t={userName:i,stars:r,title:b,photo:h,blurb:d,cafeName:O};u.a.post("http://localhost:5000/api/add-review",t).then((function(e){p(e.data.message)})).catch((function(e){console.log(e)}))},children:[Object(n.jsx)("h2",{className:"main-subheading",children:"Add review"}),Object(n.jsxs)("label",{children:["User name",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",id:"userName",name:"userName",onChange:C})]}),Object(n.jsxs)("label",{children:["Rating",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"number",id:"stars",name:"stars",onChange:C})]}),Object(n.jsxs)("label",{children:["Title",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",id:"title",name:"title",onChange:C})]}),Object(n.jsxs)("label",{children:["Photo URL",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",id:"photo",name:"photo",onChange:C})]}),Object(n.jsxs)("label",{children:["Blurb",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",id:"blurb",name:"blurb",onChange:C})]}),Object(n.jsxs)("label",{children:["Cafe",Object(n.jsx)("br",{}),Object(n.jsxs)("select",{id:"cafeName",name:"cafeName",onChange:C,children:[Object(n.jsx)("option",{value:"Customs Coffee",children:"Customs Coffee"}),Object(n.jsx)("option",{value:"Milk Crate",children:"Milk Crate"}),Object(n.jsx)("option",{value:"Best Ugly Bagels",children:"Best Ugly Bagels"}),Object(n.jsx)("option",{value:"Lamasons",children:"Lamasons"}),Object(n.jsx)("option",{value:"Retrogrove",children:"Retrogrove"}),Object(n.jsx)("option",{value:"Midnight Espresso",children:"Midnight Espresso"})]})]}),Object(n.jsx)("button",{type:"submit",children:"Submit"}),Object(n.jsx)("div",{className:"submit-message",children:!0===w?S:null})]})})},d=c(10),O=function(e){var t=e.cafes;return Object(n.jsx)("div",{className:"cafe-grid",children:t.map((function(e){var t=e.cafeName,c=e.photoURL,s=e._id;return Object(n.jsx)(d.b,{to:"/cafe-reviews/".concat(s),style:{textDecoration:"none",color:"#686262"},children:Object(n.jsxs)("div",{className:"cafe-container",children:[Object(n.jsx)("h2",{children:t}),Object(n.jsx)("img",{src:c})]})})}))})},x=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(s.useEffect)((function(){u.a.get("/api/all-cafes").then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(n.jsxs)("div",{className:"cafe-container-container",children:[Object(n.jsx)("h2",{className:"main-subheading",children:"Reviews"}),Object(n.jsx)(O,{cafes:c})]})},f=function(){return Object(n.jsx)("div",{className:"nav",children:Object(n.jsxs)("h1",{children:["The ",Object(n.jsx)("br",{})," Wellington",Object(n.jsx)("br",{}),"Coffee",Object(n.jsx)("br",{}),"Review"]})})},m=function(){return Object(n.jsxs)("div",{className:"main-container",children:[Object(n.jsx)(f,{}),Object(n.jsxs)("div",{className:"main-block-one",children:[Object(n.jsx)(x,{}),Object(n.jsx)(h,{})]})]})},v=function(e){for(var t=parseInt(e),c=Object(n.jsx)("i",{children:"\u2605"}),s=[],a=0;a<=t;a++)s.length<t&&s.push(c);return s};var p=function(e){var t=e.reviews;return Object(n.jsx)("div",{children:t.map((function(e){var t=e.title,c=e.userName,s=e.blurb,a=e.stars,i=e._id,r=v(a);return Object(n.jsxs)("div",{className:"review-container",children:[Object(n.jsx)("h1",{children:t}),r.map((function(e){return e})),Object(n.jsx)("h2",{children:"Review by: ".concat(c)}),Object(n.jsx)("p",{children:s}),Object(n.jsx)("button",{onClick:function(){return e=i,void u.a.delete("/api/reviews/".concat(e)).then((function(){console.log("review successfully deleted")})).catch((function(e){console.log(e)}));var e},children:"Delete"})]})}))})},g=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(s.useEffect)((function(){u.a.get("http://localhost:5000/api/all-reviews").then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Reviews"}),Object(n.jsx)(p,{reviews:c})]})},N=function(e){var t=e.cafe,c=e.thing;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"cafe-header",children:[Object(n.jsx)("img",{src:t.photoURL}),Object(n.jsx)("h1",{children:t.cafeName}),c]}),Object(n.jsxs)("ul",{className:"contact-details",children:[Object(n.jsx)("li",{children:t.address}),Object(n.jsx)("li",{children:t.phoneNumber}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:t.website,style:{textDecoration:"none"},children:"website"})})]})]})},w=function(e){var t=e.match,c=Object(s.useState)([]),a=Object(o.a)(c,2),i=a[0],r=a[1],j=Object(s.useState)([]),l=Object(o.a)(j,2),b=l[0],h=l[1];Object(s.useEffect)((function(){u.a.get("/api/cafe/".concat(t.params.id)).then((function(e){r(e.data)})),u.a.get("/api/all-reviews").then((function(e){h(e.data)})).catch((function(e){console.log(e)}))}),[]);var O=b.filter((function(e){return e.cafeName===i.cafeName})),x=function(e){if(e.length){var t=e.map((function(e){return parseInt(e.stars)})).reduce((function(e,t){return e+t}))/e.length,c=Math.round(t);return v(c)}return null}(O);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(d.b,{to:"/",style:{textDecoration:"none",color:"#686262"},children:Object(n.jsx)("h3",{children:"Home"})}),Object(n.jsx)(N,{cafe:i,thing:x}),Object(n.jsx)("div",{className:"reviews-container",children:Object(n.jsx)(p,{reviews:O})})]})})},y=(c(58),c(2)),C=function(){return Object(n.jsx)(d.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(y.c,{children:[Object(n.jsx)(y.a,{path:"/",exact:!0,component:m}),Object(n.jsx)(y.a,{path:"/add-review",component:h}),Object(n.jsx)(y.a,{path:"/all-reviews",component:g}),Object(n.jsx)(y.a,{path:"/cafe-reviews/:id",component:w})]})})})};r.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.b05dabe9.chunk.js.map