{"ast":null,"code":"import _defineProperty from\"C:/Users/Josh/Desktop/mocha-welly-v2/cra-plus-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Josh/Desktop/mocha-welly-v2/cra-plus-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Josh/Desktop/mocha-welly-v2/cra-plus-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import axios from'axios';var AddReview=function AddReview(){var _useState=useState({userName:'',stars:0,title:'',photo:'',blurb:'',cafeName:''}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],userName=_useState2$.userName,stars=_useState2$.stars,title=_useState2$.title,photo=_useState2$.photo,blurb=_useState2$.blurb,cafeName=_useState2$.cafeName,setFormDetails=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),submittedResponse=_useState4[0],setSubmittedResponse=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showMessage=_useState6[0],setShowMessage=_useState6[1];var handleChange=function handleChange(e){e.preventDefault();var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormDetails(function(prevForm){return _objectSpread(_objectSpread({},prevForm),{},_defineProperty({},name,value));});};var handleSubmit=function handleSubmit(e){console.log('submit function reached');e.preventDefault();var newReview={userName:userName,stars:stars,title:title,photo:photo,blurb:blurb,cafeName:cafeName};axios.post('/api/add-review',newReview).then(function(result){setSubmittedResponse(result.data.message);}).catch(function(err){console.log(err);});};var handleClick=function handleClick(){setShowMessage(false);};var setResponseMessage=function setResponseMessage(responseState){var message='';if(responseState==='Review successfully submitted'){message=/*#__PURE__*/_jsxs(\"div\",{children:[\"Review submitted!\",/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"x\"})]});}else if(responseState===''){message=null;}else{message='Error: review not submitted. Please try again later';}return message;};var message=setResponseMessage(submittedResponse);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"main-subheading\",children:\"Add review\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"User name\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"userName\",name:\"userName\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Rating\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"stars\",name:\"stars\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Title\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Photo URL\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"photo\",name:\"photo\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Blurb\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"blurb\",name:\"blurb\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Cafe\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{id:\"cafeName\",name:\"cafeName\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Customs Coffee\",children:\"Customs Coffee\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Milk Crate\",children:\"Milk Crate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Best Ugly Bagels\",children:\"Best Ugly Bagels\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Lamasons\",children:\"Lamasons\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Retrogrove\",children:\"Retrogrove\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Midnight Espresso\",children:\"Midnight Espresso\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-message\",children:showMessage===true?message:null})]})});};export default AddReview;","map":{"version":3,"sources":["C:/Users/Josh/Desktop/mocha-welly-v2/cra-plus-express/client/src/components/AddReview.jsx"],"names":["React","useState","axios","AddReview","userName","stars","title","photo","blurb","cafeName","setFormDetails","submittedResponse","setSubmittedResponse","showMessage","setShowMessage","handleChange","e","preventDefault","target","name","value","prevForm","handleSubmit","console","log","newReview","post","then","result","data","message","catch","err","handleClick","setResponseMessage","responseState"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst AddReview = () => {\r\n\r\n    const [{userName,stars,title,photo,blurb,cafeName}, setFormDetails] = useState({userName:'', stars:0, title:'', photo:'', blurb:'',cafeName:''})\r\n    const [submittedResponse, setSubmittedResponse] = useState('')\r\n    const [showMessage, setShowMessage] = useState(true)\r\n\r\n    const handleChange = (e) => {\r\n        e.preventDefault()\r\n        const {name,value} = e.target\r\n        setFormDetails(prevForm => ({\r\n            ...prevForm,\r\n            [name]:value\r\n        }))\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        console.log('submit function reached')\r\n        e.preventDefault()\r\n        const newReview = {\r\n            userName:userName,\r\n            stars:stars,\r\n            title:title,\r\n            photo:photo,\r\n            blurb:blurb,\r\n            cafeName:cafeName\r\n        }\r\n        axios.post('/api/add-review',newReview)\r\n        .then(result => {\r\n            setSubmittedResponse(result.data.message)\r\n        })\r\n        .catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setShowMessage(false)\r\n    }\r\n\r\n    const setResponseMessage = (responseState) => {\r\n        let message = ''\r\n        if(responseState === 'Review successfully submitted'){\r\n            message = <div>Review submitted!<button onClick = {handleClick}>x</button></div>\r\n        } else if (responseState === ''){\r\n            message = null\r\n        }else{\r\n            message = 'Error: review not submitted. Please try again later'\r\n        }\r\n        return message\r\n      }\r\n\r\n      const message = setResponseMessage(submittedResponse)\r\n\r\n    return(\r\n        <>\r\n        <form onSubmit ={handleSubmit}>\r\n            <h2 className = 'main-subheading'>Add review</h2>\r\n            <label>\r\n                User name<br></br>\r\n                <input type = 'text' id = 'userName' name = 'userName' onChange = {handleChange}></input>\r\n            </label>\r\n            <label>\r\n                Rating<br></br>\r\n                <input type = 'number' id = 'stars' name = 'stars' onChange = {handleChange}></input>\r\n            </label>\r\n            <label>\r\n                Title<br></br>\r\n                <input type = 'text' id = 'title' name = 'title' onChange = {handleChange}></input>\r\n            </label>\r\n            <label>\r\n                Photo URL<br></br>\r\n                <input type = 'text' id = 'photo' name = 'photo' onChange = {handleChange}></input>\r\n            </label>\r\n            <label>\r\n                Blurb<br></br>\r\n                <input type = 'text' id = 'blurb' name = 'blurb' onChange = {handleChange}></input>\r\n            </label>\r\n            <label>\r\n                Cafe<br></br>\r\n                <select id = 'cafeName' name = 'cafeName' onChange = {handleChange}>\r\n                <option value=\"Customs Coffee\">Customs Coffee</option>\r\n                <option value=\"Milk Crate\">Milk Crate</option>\r\n                <option value=\"Best Ugly Bagels\">Best Ugly Bagels</option>\r\n                <option value=\"Lamasons\">Lamasons</option>\r\n                <option value=\"Retrogrove\">Retrogrove</option>\r\n                <option value=\"Midnight Espresso\">Midnight Espresso</option>\r\n                </select>\r\n            </label>\r\n            <button type = 'submit'>Submit</button>\r\n            <div className = 'submit-message'>\r\n            {\r\n                showMessage === true ? \r\n                message\r\n                :\r\n                null\r\n            }\r\n            </div>\r\n        </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddReview"]},"metadata":{},"sourceType":"module"}